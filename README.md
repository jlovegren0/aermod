
<!-- README.md is generated from README.Rmd. Please edit that file -->

# aermod

<!-- badges: start -->

<!-- badges: end -->

Work with AERMOD unformatted binary POST files. Convert to/from R matrix
format, and calculate design values for the 2010 SO2 NAAQS. A typical
application is to generate a POST file for a unit run for each of
several sources, and use R matrix operations to scale, add, and
substitute rows.

Generate Monte Carlo runs where hours of operation are randomly turned
on/off for a source.

## Installation

``` r
# install.packages("devtools")
devtools::install_github("jlovegren0/aermod")
```

## Example

``` r
library(aermod)
#UIM_STK1 <- scan_postfile('STK1.bin')
#UIM_STK2 <- scan_postfile('STK2.bin')
#BACKGROUND <- scan_postfile('BACKGROUND.bin')
#purrr::map_dbl( seq(100,500,100) , ~ 500*UIM_STK + . * UIM_STK2 + BACKGROUND )
#
# Generate 72 hours per year of random operation for calendar years 2016--2020
# (the default year span).
hrs_rand(yrspan=2016:2020,nblock=72,blocklen=1)
#>   [1]   179   185   323   330   676   709   772   922   999  1219  1232  1562
#>  [13]  1698  1770  1940  2074  2309  2524  2818  2831  2852  2937  2958  3187
#>  [25]  3310  3591  3611  3685  3761  3764  3885  4112  4134  4161  4245  4390
#>  [37]  4466  4469  4608  4650  4669  4699  4711  4756  4784  4897  4903  4913
#>  [49]  5315  5467  5628  5639  5709  5953  6242  6681  6710  6887  7083  7240
#>  [61]  7469  7635  7770  7873  7904  8195  8196  8439  8541  8573  8692  8763
#>  [73]  8865  8995  9066  9160  9699  9774  9835  9847  9964 10152 10316 10377
#>  [85] 10453 10475 10519 10609 11142 11209 11368 11480 11601 11744 12016 12102
#>  [97] 12459 12556 12587 12641 12658 13085 13132 13136 13273 13392 13558 13811
#> [109] 14130 14374 14588 14622 14820 14954 14955 15083 15316 15323 15342 15567
#> [121] 15595 15648 15655 15685 15704 15802 15862 15877 16026 16037 16661 16673
#> [133] 16718 16974 16991 17098 17146 17201 17206 17235 17376 17416 17434 17461
#> [145] 17628 17921 17989 18243 18356 18638 18698 18772 18785 19012 19120 19141
#> [157] 19202 19344 19461 19465 19507 19709 19807 19830 19916 20081 20165 20201
#> [169] 20312 20699 20820 21111 21239 21274 21314 21717 21784 21901 22150 22185
#> [181] 22449 22498 22654 22738 22748 22814 22939 22983 23174 23197 23451 23533
#> [193] 23560 23655 23887 24011 24019 24126 24221 24273 24308 24448 24585 24835
#> [205] 24910 25070 25266 25317 25466 25482 25705 25912 26042 26131 26178 26286
#> [217] 26401 26426 26496 26651 26672 26949 27080 27190 27316 27320 27397 27448
#> [229] 27528 27719 27866 27875 27930 27961 28169 28190 28228 28377 28807 29170
#> [241] 29353 29475 29628 29768 29839 29847 29938 29971 29991 30443 30597 30752
#> [253] 30843 30846 30888 31188 31338 31396 31589 31717 31735 31823 31933 32010
#> [265] 32105 32108 32241 32394 32867 32947 33022 33027 33237 33241 33371 33509
#> [277] 33528 33616 33631 33737 33751 33953 34227 34335 34523 34849 35040 35059
#> [289] 35235 35236 35280 35304 35344 35468 35660 35790 36003 36138 36191 36340
#> [301] 36490 36545 36727 37074 37304 37360 37401 37535 37614 37890 37987 38211
#> [313] 38220 38373 38486 38765 38858 38864 38929 38932 38938 39257 39261 39335
#> [325] 39359 39523 39627 39764 39984 40086 40116 40162 40334 40570 40663 41020
#> [337] 41108 41154 41253 41443 41571 41577 41599 41798 41799 41863 41937 42011
#> [349] 42387 42412 42586 42733 42827 43067 43190 43243 43427 43613 43756 43780
# Generate one block per year of 20 consecutive operating hours, 
# subject to a restriction that blocks must be 365 days apart (which_filter=2).
hrs_rand(nblock=1,blocklen=20,which_filter=2)
#>   [1]  7385  7386  7387  7388  7389  7390  7391  7392  7393  7394  7395  7396
#>  [13]  7397  7398  7399  7400  7401  7402  7403  7404 11066 11067 11068 11069
#>  [25] 11070 11071 11072 11073 11074 11075 11076 11077 11078 11079 11080 11081
#>  [37] 11082 11083 11084 11085 25777 25778 25779 25780 25781 25782 25783 25784
#>  [49] 25785 25786 25787 25788 25789 25790 25791 25792 25793 25794 25795 25796
#>  [61] 27001 27002 27003 27004 27005 27006 27007 27008 27009 27010 27011 27012
#>  [73] 27013 27014 27015 27016 27017 27018 27019 27020 40015 40016 40017 40018
#>  [85] 40019 40020 40021 40022 40023 40024 40025 40026 40027 40028 40029 40030
#>  [97] 40031 40032 40033 40034
```
